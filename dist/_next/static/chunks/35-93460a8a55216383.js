(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{3941:(e,r,t)=>{"use strict";t.d(r,{N:()=>s});let s=(0,t(70945).UU)("https://cpkslvmydfdevdftieck.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwa3Nsdm15ZGZkZXZkZnRpZWNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5MDAyOTUsImV4cCI6MjA2MjQ3NjI5NX0.IfkIVsp3AtLOyXDW9hq9bEvnozd9IaaUay244iDhWGE")},8829:(e,r,t)=>{"use strict";t.d(r,{TM:()=>i,l6:()=>n,pd:()=>a});var s=t(95155);function a(e){let{label:r,error:t,helperText:a,helpText:i,className:n="",...o}=e,c=a||i;return(0,s.jsxs)("div",{className:"w-full",children:[r&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:r}),(0,s.jsx)("input",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 ".concat(t?"border-red-500":"border-gray-300 dark:border-gray-600"," ").concat(n),...o}),t&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t}),c&&!t&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:c})]})}function i(e){let{label:r,error:t,helperText:a,className:i="",...n}=e;return(0,s.jsxs)("div",{className:"w-full",children:[r&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:r}),(0,s.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 ".concat(t?"border-red-500":"border-gray-300 dark:border-gray-600"," ").concat(i),...n}),t&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t}),a&&!t&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:a})]})}function n(e){let{label:r,error:t,helperText:a,options:i,className:n="",...o}=e;return(0,s.jsxs)("div",{className:"w-full",children:[r&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:r}),(0,s.jsx)("select",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 ".concat(t?"border-red-500":"border-gray-300 dark:border-gray-600"," ").concat(n),...o,children:i.map(e=>(0,s.jsx)("option",{value:e.value,className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:e.label},e.value))}),t&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t}),a&&!t&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:a})]})}t(12115)},27434:(e,r,t)=>{"use strict";t.d(r,{h:()=>l,p:()=>u});var s=t(95155),a=t(12115),i=t(42529),n=t(78874),o=t(6132),c=t(65229);let d=(0,a.createContext)(void 0);function l(){let e=(0,a.useContext)(d);if(!e)throw Error("useNotification must be used within NotificationProvider");return e}function u(e){let{children:r}=e,[t,l]=(0,a.useState)([]),[u,g]=(0,a.useState)(null),m=(0,a.useCallback)(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=Date.now();l(s=>[...s,{id:t,message:e,type:r}]),setTimeout(()=>{l(e=>e.filter(e=>e.id!==t))},5e3)},[]),x=(0,a.useCallback)((e,r)=>{g({message:e,onConfirm:r})},[]);return(0,s.jsxs)(d.Provider,{value:{showNotification:m,showConfirm:x},children:[r,(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>(0,s.jsxs)("div",{className:"\n              min-w-[300px] max-w-md p-4 rounded-lg shadow-lg border\n              flex items-start gap-3\n              animate-in slide-in-from-right duration-300\n              ".concat("success"===e.type?"bg-green-50 dark:bg-green-900/60 border-green-200 dark:border-green-700":"","\n              ").concat("error"===e.type?"bg-red-50 dark:bg-red-900/60 border-red-200 dark:border-red-700":"","\n              ").concat("warning"===e.type?"bg-yellow-50 dark:bg-yellow-900/60 border-yellow-200 dark:border-yellow-700":"","\n              ").concat("info"===e.type?"bg-blue-50 dark:bg-blue-900/60 border-blue-200 dark:border-blue-700":"","\n            "),children:["success"===e.type&&(0,s.jsx)(i.A,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),"error"===e.type&&(0,s.jsx)(n.A,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),"warning"===e.type&&(0,s.jsx)(o.A,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),"info"===e.type&&(0,s.jsx)(o.A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"\n              flex-1 text-sm\n              ".concat("success"===e.type?"text-green-800 dark:text-green-200":"","\n              ").concat("error"===e.type?"text-red-800 dark:text-red-200":"","\n              ").concat("warning"===e.type?"text-yellow-800 dark:text-yellow-200":"","\n              ").concat("info"===e.type?"text-blue-800 dark:text-blue-200":"","\n            "),children:e.message}),(0,s.jsx)("button",{onClick:()=>{var r;return r=e.id,void l(e=>e.filter(e=>e.id!==r))},className:"\n                flex-shrink-0 rounded p-1 transition-colors\n                ".concat("success"===e.type?"hover:bg-green-200 dark:hover:bg-green-800 text-green-600 dark:text-green-400":"","\n                ").concat("error"===e.type?"hover:bg-red-200 dark:hover:bg-red-800 text-red-600 dark:text-red-400":"","\n                ").concat("warning"===e.type?"hover:bg-yellow-200 dark:hover:bg-yellow-800 text-yellow-600 dark:text-yellow-400":"","\n                ").concat("info"===e.type?"hover:bg-blue-200 dark:hover:bg-blue-800 text-blue-600 dark:text-blue-400":"","\n              "),children:(0,s.jsx)(c.A,{className:"w-4 h-4"})})]},e.id))}),u&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 animate-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)(o.A,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Confirm Action"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.message})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:()=>{g(null)},className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{u&&(u.onConfirm(),g(null))},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Confirm"})]})]})})]})}},28297:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>o,ZB:()=>n,Zp:()=>a,aR:()=>i});var s=t(95155);function a(e){let{children:r,className:t=""}=e;return(0,s.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg shadow-sm border border-gray-300 dark:border-gray-700 ".concat(t),children:r})}function i(e){let{children:r,className:t=""}=e;return(0,s.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 ".concat(t),children:r})}function n(e){let{children:r,className:t=""}=e;return(0,s.jsx)("h3",{className:"text-lg font-bold gradient-text ".concat(t),children:r})}function o(e){let{children:r,className:t=""}=e;return(0,s.jsx)("div",{className:"px-6 py-4 ".concat(t),children:r})}t(12115)},42634:()=>{},53763:(e,r,t)=>{"use strict";t.d(r,{M:()=>o});var s=t(48407),a=t(3941),i=t(15376).Buffer;class n{async initialize(e){try{let{data:r,error:t}=await a.N.from("billing_settings").select("stripe_api_key_encrypted, stripe_test_mode").eq("user_id",e).single();if(t||!r||!r.stripe_api_key_encrypted)return console.warn("No Stripe API key configured"),!1;let i=await this.decryptApiKey(r.stripe_api_key_encrypted);return this.stripe=new s.A(i,{apiVersion:"2025-09-30.clover",typescript:!0}),this.testMode=r.stripe_test_mode,console.log("Stripe initialized:",this.testMode?"Test Mode":"Live Mode"),!0}catch(e){return console.error("Failed to initialize Stripe:",e),!1}}async testConnection(){if(!this.stripe)return{success:!1,message:"Stripe not initialized"};try{return await this.stripe.customers.list({limit:1}),{success:!0,message:"Connected successfully (".concat(this.testMode?"Test Mode":"Live Mode",")")}}catch(e){if(e instanceof s.A.errors.StripeAuthenticationError)return{success:!1,message:"Invalid API key"};return{success:!1,message:e instanceof Error?e.message:"Connection failed"}}}async createCustomer(e){if(!this.stripe)return{success:!1,error:"Stripe not initialized"};try{let r=await this.stripe.customers.create({email:e.email,name:e.name,phone:e.phone,address:e.address?{line1:e.address}:void 0,metadata:{...e.metadata,nexasync_created_at:new Date().toISOString()}});return{success:!0,customerId:r.id}}catch(e){return console.error("Failed to create Stripe customer:",e),{success:!1,error:e instanceof Error?e.message:"Failed to create customer"}}}async createInvoice(e){if(!this.stripe)return{success:!1,error:"Stripe not initialized"};try{var r;let t=await this.stripe.invoices.create({customer:e.stripeCustomerId,collection_method:"send_invoice",days_until_due:e.dueInDays,auto_advance:null!=(r=e.autoAdvance)&&r,metadata:e.metadata||{}});for(let r of e.lineItems)await this.stripe.invoiceItems.create({customer:e.stripeCustomerId,invoice:t.id,description:r.description,amount:r.amount,currency:r.currency});return{success:!0,invoice:t}}catch(e){return console.error("Failed to create invoice:",e),{success:!1,error:e instanceof Error?e.message:"Failed to create invoice"}}}async finalizeInvoice(e){if(!this.stripe)return{success:!1,error:"Stripe not initialized"};try{return await this.stripe.invoices.finalizeInvoice(e),{success:!0}}catch(e){return console.error("Failed to finalize invoice:",e),{success:!1,error:e instanceof Error?e.message:"Failed to finalize invoice"}}}async sendInvoice(e){if(!this.stripe)return{success:!1,error:"Stripe not initialized"};try{return await this.stripe.invoices.sendInvoice(e),{success:!0}}catch(e){return console.error("Failed to send invoice:",e),{success:!1,error:e instanceof Error?e.message:"Failed to send invoice"}}}async markInvoiceAsPaid(e){if(!this.stripe)return{success:!1,error:"Stripe not initialized"};try{return await this.stripe.invoices.pay(e,{paid_out_of_band:!0}),{success:!0}}catch(e){return console.error("Failed to mark invoice as paid:",e),{success:!1,error:e instanceof Error?e.message:"Failed to mark as paid"}}}async voidInvoice(e){if(!this.stripe)return{success:!1,error:"Stripe not initialized"};try{return await this.stripe.invoices.voidInvoice(e),{success:!0}}catch(e){return console.error("Failed to void invoice:",e),{success:!1,error:e instanceof Error?e.message:"Failed to void invoice"}}}async decryptApiKey(e){try{return i.from(e,"base64").toString("utf-8")}catch(r){return e}}async encryptApiKey(e){return i.from(e,"utf-8").toString("base64")}constructor(){this.stripe=null,this.testMode=!0}}let o=new n},70667:(e,r,t)=>{"use strict";t.d(r,{$:()=>a});var s=t(95155);function a(e){let{variant:r="primary",size:t="md",loading:a=!1,disabled:i,children:n,className:o="",...c}=e;return(0,s.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 dark:bg-blue-500 text-white hover:bg-blue-700 dark:hover:bg-blue-600 focus:ring-blue-500 disabled:bg-blue-300 dark:disabled:bg-blue-800",secondary:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 focus:ring-gray-500 disabled:bg-gray-100 dark:disabled:bg-gray-800",danger:"bg-red-600 dark:bg-red-500 text-white hover:bg-red-700 dark:hover:bg-red-600 focus:ring-red-500 disabled:bg-red-300 dark:disabled:bg-red-800",ghost:"bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 focus:ring-gray-500"}[r]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t]," ").concat(o," ").concat(i||a?"cursor-not-allowed opacity-50":""),disabled:i||a,...c,children:[a&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})}t(12115)}}]);