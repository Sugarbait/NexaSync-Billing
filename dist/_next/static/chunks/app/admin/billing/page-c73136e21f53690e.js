(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{3941:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(70945).UU)("https://cpkslvmydfdevdftieck.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwa3Nsdm15ZGZkZXZkZnRpZWNrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY5MDAyOTUsImV4cCI6MjA2MjQ3NjI5NX0.IfkIVsp3AtLOyXDW9hq9bEvnozd9IaaUay244iDhWGE")},8829:(e,t,s)=>{"use strict";s.d(t,{TM:()=>l,l6:()=>n,pd:()=>r});var a=s(95155);function r(e){let{label:t,error:s,helperText:r,helpText:l,className:n="",...i}=e,d=r||l;return(0,a.jsxs)("div",{className:"w-full",children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:t}),(0,a.jsx)("input",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 ".concat(s?"border-red-500":"border-gray-300 dark:border-gray-600"," ").concat(n),...i}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s}),d&&!s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:d})]})}function l(e){let{label:t,error:s,helperText:r,className:l="",...n}=e;return(0,a.jsxs)("div",{className:"w-full",children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:t}),(0,a.jsx)("textarea",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 ".concat(s?"border-red-500":"border-gray-300 dark:border-gray-600"," ").concat(l),...n}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s}),r&&!s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:r})]})}function n(e){let{label:t,error:s,helperText:r,options:l,className:n="",...i}=e;return(0,a.jsxs)("div",{className:"w-full",children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:t}),(0,a.jsx)("select",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 ".concat(s?"border-red-500":"border-gray-300 dark:border-gray-600"," ").concat(n),...i,children:l.map(e=>(0,a.jsx)("option",{value:e.value,className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:e.label},e.value))}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s}),r&&!s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:r})]})}s(12115)},25828:(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var a=s(95155);function r(e){let{children:t,color:s="gray",className:r=""}=e;return(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({gray:"bg-gray-100 text-gray-800",blue:"bg-blue-100 text-blue-800",green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800"}[s]," ").concat(r),children:t})}s(12115)},28297:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>i,ZB:()=>n,Zp:()=>r,aR:()=>l});var a=s(95155);function r(e){let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg shadow-sm border border-gray-300 dark:border-gray-700 ".concat(s),children:t})}function l(e){let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 ".concat(s),children:t})}function n(e){let{children:t,className:s=""}=e;return(0,a.jsx)("h3",{className:"text-lg font-bold gradient-text ".concat(s),children:t})}function i(e){let{children:t,className:s=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 ".concat(s),children:t})}s(12115)},53840:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(95155),r=s(12115),l=s(89559),n=s(19408),i=s(91761),d=s(1524),c=s(91169),o=s(89715),m=s(28297),x=s(70667),g=s(25828),u=s(8829);function h(){let e=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let t,s=e.current;if(!s)return;let a=s.getContext("2d");if(!a)return;let r=()=>{let e=s.parentElement;if(e){let t=window.devicePixelRatio||1,r=e.getBoundingClientRect();s.style.width=r.width+"px",s.style.height=r.height+"px",s.width=r.width*t,s.height=r.height*t,a.scale(t,t)}};r(),window.addEventListener("resize",r);let l=0,n=()=>{let e=s.parentElement;if(!e)return;let r=e.getBoundingClientRect();a.clearRect(0,0,r.width,r.height),l+=.01,[{amplitude:30,frequency:.015,speed:.5,opacity:.15,offset:0},{amplitude:25,frequency:.02,speed:.3,opacity:.1,offset:50},{amplitude:20,frequency:.025,speed:.4,opacity:.12,offset:100}].forEach((e,t)=>{a.beginPath(),a.moveTo(0,r.height/2);for(let t=0;t<=r.width;t+=2){let s=r.height/2+Math.sin(t*e.frequency+l*e.speed)*e.amplitude+Math.sin(t*e.frequency*.5+l*e.speed*1.5)*(.5*e.amplitude);0===t?a.moveTo(t,s):a.lineTo(t,s)}a.lineTo(r.width,r.height),a.lineTo(0,r.height),a.closePath();let s=a.createLinearGradient(0,0,0,r.height);s.addColorStop(0,"rgba(255, 255, 255, ".concat(e.opacity,")")),s.addColorStop(1,"rgba(255, 255, 255, 0)"),a.fillStyle=s,a.fill()});for(let e=0;e<12;e++){let t=r.width/12*e+30*Math.sin(.5*l+e),s=r.height/2+40*Math.sin(.3*l+.5*e),n=3+1.5*Math.sin(l+e);a.beginPath(),a.arc(t,s,n,0,2*Math.PI),a.fillStyle="rgba(255, 255, 255, ".concat(.3+.1*Math.sin(l+e),")"),a.fill()}t=requestAnimationFrame(n)};return n(),()=>{window.removeEventListener("resize",r),cancelAnimationFrame(t)}},[]),(0,a.jsx)("canvas",{ref:e,className:"absolute top-0 left-0 w-full h-full pointer-events-none z-0 opacity-60",style:{mixBlendMode:"screen"}})}var p=s(54074),y=s(26991),b=s(59135),f=s(68425),j=s(47734),v=s(73697),N=s(99919),w=s(37665),k=s(87166),_=s(3941),I=s(52619),S=s.n(I);function M(){let[e,t]=(0,r.useState)(!0),[s,I]=(0,r.useState)(!0),[M,C]=(0,r.useState)(new Date),[R,T]=(0,r.useState)([]),[D,A]=(0,r.useState)("all"),[W,E]=(0,r.useState)((0,p.vM)()),O=(0,r.useRef)(void 0),[F,Z]=(0,r.useState)({currentMonthRevenue:0,previousMonthRevenue:0,totalCustomers:0,pendingInvoices:0,currentMonthCosts:{twilioSMS:0,twilioVoice:0,vonage:0,retellAI:0,total:0}}),[z,L]=(0,r.useState)([]),[q,P]=(0,r.useState)([]);async function B(){try{let{data:e}=await _.N.from("billing_customers").select("*").order("customer_name",{ascending:!0});T(e||[])}catch(e){console.error("Failed to load customers:",e),T([])}}let V=(0,r.useCallback)(async()=>{s&&t(!0);try{await Promise.all([$(),Y(),G(),U(),J(),K(),X()]),C(new Date)}catch(e){console.error("Failed to load dashboard data:",e)}finally{s&&(t(!1),I(!1))}},[D,R,W,s]);async function $(){try{let e=_.N.from("invoice_records").select("total_amount_cad").gte("billing_period_start",W.start.toISOString().split("T")[0]).lte("billing_period_end",W.end.toISOString().split("T")[0]);"all"!==D&&(e=e.eq("billing_customer_id",D));let{data:t}=await e,s=(null==t?void 0:t.reduce((e,t)=>e+Number(t.total_amount_cad),0))||0;Z(e=>({...e,currentMonthRevenue:s}))}catch(e){Z(e=>({...e,currentMonthRevenue:0}))}}async function Y(){try{let{start:e,end:t}=(0,p.Ln)(),s=_.N.from("invoice_records").select("total_amount_cad").gte("billing_period_start",e.toISOString().split("T")[0]).lte("billing_period_end",t.toISOString().split("T")[0]);"all"!==D&&(s=s.eq("billing_customer_id",D));let{data:a}=await s,r=(null==a?void 0:a.reduce((e,t)=>e+Number(t.total_amount_cad),0))||0;Z(e=>({...e,previousMonthRevenue:r}))}catch(e){Z(e=>({...e,previousMonthRevenue:0}))}}async function G(){try{if("all"===D){let{count:e}=await _.N.from("billing_customers").select("*",{count:"exact",head:!0});Z(t=>({...t,totalCustomers:e||0}))}else Z(e=>({...e,totalCustomers:1}))}catch(e){Z(e=>({...e,totalCustomers:0}))}}async function U(){try{let e=_.N.from("invoice_records").select("*",{count:"exact",head:!0}).in("invoice_status",["draft","sent"]).gte("billing_period_start",W.start.toISOString().split("T")[0]).lte("billing_period_end",W.end.toISOString().split("T")[0]);"all"!==D&&(e=e.eq("billing_customer_id",D));let{count:t}=await e;Z(e=>({...e,pendingInvoices:t||0}))}catch(e){Z(e=>({...e,pendingInvoices:0}))}}async function J(){let e=_.N.from("invoice_records").select("\n        *,\n        billing_customers!inner(customer_name, customer_email)\n      ").gte("billing_period_start",W.start.toISOString().split("T")[0]).lte("billing_period_end",W.end.toISOString().split("T")[0]).order("created_at",{ascending:!1}).limit(10);"all"!==D&&(e=e.eq("billing_customer_id",D));let{data:t}=await e;L(t||[])}async function X(){try{let e=_.N.from("invoice_records").select("twilio_sms_cost_cad, twilio_voice_cost_cad, vonage_cost_cad, retell_ai_cost_cad").gte("billing_period_start",W.start.toISOString().split("T")[0]).lte("billing_period_end",W.end.toISOString().split("T")[0]);"all"!==D&&(e=e.eq("billing_customer_id",D));let{data:t}=await e,s=(null==t?void 0:t.reduce((e,t)=>e+Number(t.twilio_sms_cost_cad||0),0))||0,a=(null==t?void 0:t.reduce((e,t)=>e+Number(t.twilio_voice_cost_cad||0),0))||0,r=(null==t?void 0:t.reduce((e,t)=>e+Number(t.vonage_cost_cad||0),0))||0,l=(null==t?void 0:t.reduce((e,t)=>e+Number(t.retell_ai_cost_cad||0),0))||0,n=s+a+r+l;Z(e=>({...e,currentMonthCosts:{twilioSMS:s,twilioVoice:a,vonage:r,retellAI:l,total:n}}))}catch(e){Z(e=>({...e,currentMonthCosts:{twilioSMS:0,twilioVoice:0,vonage:0,retellAI:0,total:0}}))}}async function K(){P([])}return((0,r.useEffect)(()=>{O.current=V},[V]),(0,r.useEffect)(()=>{B()},[]),(0,r.useEffect)(()=>{V()},[V]),(0,r.useEffect)(()=>{let e=setInterval(()=>{var e;null==(e=O.current)||e.call(O)},6e4);return()=>clearInterval(e)},[]),e)?(0,a.jsx)("div",{className:"p-4 md:p-6 lg:p-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 md:h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 md:w-1/4 mb-6 md:mb-8"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-24 md:h-32 bg-gray-200 dark:bg-gray-700 rounded"},t))})]})}):(0,a.jsxs)("div",{className:"p-4 md:p-6 lg:p-8",children:[(0,a.jsxs)("div",{className:"mb-6 md:mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:justify-between gap-4 lg:gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"w-full lg:w-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-black gradient-text",children:"Billing Admin"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(l.A,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,a.jsxs)("span",{children:["Last updated: ",M.toLocaleTimeString()]})]})]}),(0,a.jsxs)("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mt-2",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Manage customers, generate invoices, and track revenue • Auto-refreshes every minute"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Manage billing • Auto-refresh"})]})]}),(0,a.jsxs)("div",{className:"w-full lg:w-72",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 inline mr-2"}),"Filter by Company"]}),(0,a.jsx)(u.l6,{value:D,onChange:e=>A(e.target.value),options:[{value:"all",label:"All Companies"},...R.map(e=>({value:e.id,label:e.customer_name}))]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"From:"}),(0,a.jsx)("input",{type:"date",value:W.start.toISOString().split("T")[0],onChange:e=>E({...W,start:new Date(e.target.value)}),className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 whitespace-nowrap",children:"To:"}),(0,a.jsx)("input",{type:"date",value:W.end.toISOString().split("T")[0],onChange:e=>E({...W,end:new Date(e.target.value)}),className:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(x.$,{variant:"secondary",size:"sm",onClick:()=>{let e=new Date;e.setHours(0,0,0,0),E({start:e,end:e})},children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Today"}),(0,a.jsx)("span",{className:"sm:hidden",children:"1D"})]}),(0,a.jsxs)(x.$,{variant:"secondary",size:"sm",onClick:()=>E((0,p.vM)()),children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"This Month"}),(0,a.jsx)("span",{className:"sm:hidden",children:"MTD"})]}),(0,a.jsxs)(x.$,{variant:"secondary",size:"sm",onClick:()=>E((0,p.Ln)()),children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Last Month"}),(0,a.jsx)("span",{className:"sm:hidden",children:"LM"})]}),(0,a.jsxs)(x.$,{variant:"secondary",size:"sm",onClick:()=>{let e=new Date,t=new Date;t.setMonth(t.getMonth()-3),E({start:t,end:e})},children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Last 3 Months"}),(0,a.jsx)("span",{className:"sm:hidden",children:"3M"})]})]})]})]}),(0,a.jsxs)(m.Zp,{className:"mb-6 md:mb-8 bg-gradient-to-br from-blue-600 to-purple-600 border-none relative overflow-hidden",children:[(0,a.jsx)(h,{}),(0,a.jsx)(m.Wu,{className:"p-4 md:p-6 lg:p-8 relative z-10",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-white/80 text-sm md:text-base lg:text-lg mb-2",children:["Total Cost (",(0,p.tX)(W),")"]}),(0,a.jsx)("p",{className:"text-3xl md:text-5xl lg:text-6xl font-black text-white mb-4 md:mb-6",style:{textShadow:"0 4px 12px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.3)"},children:(0,p.IW)(F.currentMonthCosts.total)}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:flex md:items-center md:justify-center gap-4 md:gap-6 lg:gap-8 text-white/90",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm opacity-75",children:"Twilio SMS"}),(0,a.jsx)("p",{className:"text-base md:text-lg lg:text-xl font-bold",children:(0,p.IW)(F.currentMonthCosts.twilioSMS)})]}),(0,a.jsx)("div",{className:"hidden md:block w-px h-12 bg-white/30"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm opacity-75",children:"Twilio Voice"}),(0,a.jsx)("p",{className:"text-base md:text-lg lg:text-xl font-bold",children:(0,p.IW)(F.currentMonthCosts.twilioVoice)})]}),(0,a.jsx)("div",{className:"hidden md:block w-px h-12 bg-white/30"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm opacity-75",children:"Vonage"}),(0,a.jsx)("p",{className:"text-base md:text-lg lg:text-xl font-bold",children:(0,p.IW)(F.currentMonthCosts.vonage)})]}),(0,a.jsx)("div",{className:"hidden md:block w-px h-12 bg-white/30"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm opacity-75",children:"Retell AI"}),(0,a.jsx)("p",{className:"text-base md:text-lg lg:text-xl font-bold",children:(0,p.IW)(F.currentMonthCosts.retellAI)})]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[(0,a.jsx)(m.Zp,{children:(0,a.jsx)(m.Wu,{className:"p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:"Revenue (Selected Period)"}),(0,a.jsx)("p",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-green-600 dark:text-green-400",children:(0,p.IW)(F.currentMonthRevenue)})]}),(0,a.jsx)("div",{className:"p-2 md:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:(0,a.jsx)(i.A,{className:"w-5 h-5 md:w-6 md:h-6 text-blue-600 dark:text-blue-400"})})]})})}),(0,a.jsx)(m.Zp,{children:(0,a.jsx)(m.Wu,{className:"p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:"Growth vs Previous Period"}),(0,a.jsx)("p",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-green-600 dark:text-green-400",children:F.previousMonthRevenue>0?"".concat(((F.currentMonthRevenue-F.previousMonthRevenue)/F.previousMonthRevenue*100).toFixed(1),"%"):"0%"})]}),(0,a.jsx)("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,a.jsx)(d.A,{className:"w-5 h-5 md:w-6 md:h-6 text-green-600 dark:text-green-400"})})]})})}),(0,a.jsx)(m.Zp,{children:(0,a.jsx)(m.Wu,{className:"p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:"Total Customers"}),(0,a.jsx)("p",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-700 dark:text-gray-200",children:F.totalCustomers})]}),(0,a.jsx)("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:(0,a.jsx)(c.A,{className:"w-5 h-5 md:w-6 md:h-6 text-purple-600 dark:text-purple-400"})})]})})}),(0,a.jsx)(m.Zp,{children:(0,a.jsx)(m.Wu,{className:"p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:"Pending Invoices"}),(0,a.jsx)("p",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-700 dark:text-gray-200",children:F.pendingInvoices})]}),(0,a.jsx)("div",{className:"p-2 md:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:(0,a.jsx)(o.A,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-600 dark:text-yellow-400"})})]})})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 md:gap-4 mb-6 md:mb-8",children:[(0,a.jsx)(S(),{href:"/admin/billing/invoices/generate",children:(0,a.jsxs)(x.$,{size:"sm",className:"md:text-base md:px-6 md:py-3",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Generate Monthly Invoices"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Generate Invoices"})]})}),(0,a.jsx)(S(),{href:"/admin/billing/invoices",children:(0,a.jsxs)(x.$,{variant:"secondary",size:"sm",className:"md:text-base md:px-6 md:py-3",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"View Invoice History"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Invoices"})]})}),(0,a.jsx)(S(),{href:"/admin/billing/customers",children:(0,a.jsxs)(x.$,{variant:"secondary",size:"sm",className:"md:text-base md:px-6 md:py-3",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Manage Customers"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Customers"})]})}),(0,a.jsx)(S(),{href:"/admin/billing/settings",children:(0,a.jsx)(x.$,{variant:"secondary",size:"sm",className:"md:text-base md:px-6 md:py-3",children:"Settings"})})]}),(0,a.jsxs)(m.Zp,{className:"mb-6 md:mb-8",children:[(0,a.jsx)(m.aR,{children:(0,a.jsx)(m.ZB,{className:"text-base md:text-lg",children:"Revenue by Company (Last 6 Months)"})}),(0,a.jsx)(m.Wu,{children:0===q.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-[200px] md:h-[300px] text-gray-500 dark:text-gray-400 text-sm md:text-base px-4 text-center",children:(0,a.jsx)("p",{children:"No revenue data available yet. Start by adding customers and generating invoices."})}):(0,a.jsx)(y.u,{width:"100%",height:window.innerWidth<768?250:300,children:(0,a.jsxs)(b.E,{data:q,children:[(0,a.jsx)(f.d,{strokeDasharray:"3 3",className:"stroke-gray-300 dark:stroke-gray-600"}),(0,a.jsx)(j.W,{dataKey:"month",className:"fill-gray-700 dark:fill-gray-300"}),(0,a.jsx)(v.h,{tickFormatter:e=>"$".concat(e),className:"fill-gray-700 dark:fill-gray-300"}),(0,a.jsx)(N.m,{formatter:e=>"".concat((0,p.IW)(Number(e))),contentStyle:{backgroundColor:"var(--card-bg)",border:"1px solid var(--border-color)",borderRadius:"0.5rem",color:"var(--text-primary)"},labelStyle:{color:"var(--text-primary)"},itemStyle:{color:"var(--text-primary)"}}),(0,a.jsx)(w.s,{wrapperStyle:{color:"var(--text-secondary)"}}),(0,a.jsx)(k.y,{dataKey:"sunriseMedical",stackId:"a",fill:"#3B82F6",name:"Sunrise Medical Clinic"}),(0,a.jsx)(k.y,{dataKey:"valleyDental",stackId:"a",fill:"#6366F1",name:"Valley Dental Group"}),(0,a.jsx)(k.y,{dataKey:"wellnessChiro",stackId:"a",fill:"#10B981",name:"Wellness Chiropractic"}),(0,a.jsx)(k.y,{dataKey:"pediatricAssoc",stackId:"a",fill:"#F59E0B",name:"Pediatric Associates"})]})})})]}),(0,a.jsxs)(m.Zp,{children:[(0,a.jsx)(m.aR,{children:(0,a.jsx)(m.ZB,{className:"text-base md:text-lg",children:"Recent Invoices"})}),(0,a.jsx)(m.Wu,{children:(0,a.jsx)("div",{className:"overflow-x-auto -mx-4 md:mx-0",children:(0,a.jsxs)("table",{className:"w-full min-w-[600px]",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date"}),(0,a.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Customer"}),(0,a.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Period"}),(0,a.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount"}),(0,a.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"})]})}),(0,a.jsx)("tbody",{children:0===z.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center py-6 md:py-8 text-gray-500 dark:text-gray-400 text-sm",children:"No invoices yet. Generate your first invoice to get started."})}):z.map(e=>{var t;return(0,a.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[(0,a.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm text-gray-900 dark:text-gray-100",children:(0,p.Yq)(e.created_at)}),(0,a.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm text-gray-900 dark:text-gray-100",children:null==(t=e.billing_customers)?void 0:t.customer_name}),(0,a.jsxs)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm text-gray-900 dark:text-gray-100",children:[(0,p.Yq)(e.billing_period_start)," - ",(0,p.Yq)(e.billing_period_end)]}),(0,a.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-900 dark:text-gray-100",children:(0,p.IW)(Number(e.total_amount_cad))}),(0,a.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm",children:(0,a.jsx)(g.E,{color:{draft:"gray",sent:"blue",paid:"green",overdue:"red",cancelled:"gray"}[e.invoice_status]||"gray",children:e.invoice_status})})]},e.id)})})]})})})]})]})}},54074:(e,t,s)=>{"use strict";function a(e){return null==e||isNaN(e)?"$0.00":new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function r(e){if(!e)return"N/A";let t="string"==typeof e?new Date(e):e;return isNaN(t.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"short",day:"numeric"}).format(t)}function l(e){return"".concat(r(e.start)," - ").concat(r(e.end))}function n(){let e=new Date;return{start:new Date(e.getFullYear(),e.getMonth()-1,1),end:new Date(e.getFullYear(),e.getMonth(),0)}}function i(){let e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),1),end:new Date}}function d(e){if(0===e.length)return"";let t=Object.keys(e[0]),s=[];for(let a of(s.push(t.join(",")),e)){let e=t.map(e=>{let t=String(a[e]).replace(/"/g,'""');return t.includes(",")?'"'.concat(t,'"'):t});s.push(e.join(","))}return s.join("\n")}function c(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",a=new Blob([e],{type:s}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)}s.d(t,{IW:()=>a,JT:()=>d,Ln:()=>n,PE:()=>c,Yq:()=>r,tX:()=>l,vM:()=>i})},63974:(e,t,s)=>{Promise.resolve().then(s.bind(s,53840))},70667:(e,t,s)=>{"use strict";s.d(t,{$:()=>r});var a=s(95155);function r(e){let{variant:t="primary",size:s="md",loading:r=!1,disabled:l,children:n,className:i="",...d}=e;return(0,a.jsxs)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 dark:bg-blue-500 text-white hover:bg-blue-700 dark:hover:bg-blue-600 focus:ring-blue-500 disabled:bg-blue-300 dark:disabled:bg-blue-800",secondary:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600 focus:ring-gray-500 disabled:bg-gray-100 dark:disabled:bg-gray-800",danger:"bg-red-600 dark:bg-red-500 text-white hover:bg-red-700 dark:hover:bg-red-600 focus:ring-red-500 disabled:bg-red-300 dark:disabled:bg-red-800",ghost:"bg-transparent text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s]," ").concat(i," ").concat(l||r?"cursor-not-allowed opacity-50":""),disabled:l||r,...d,children:[r&&(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})}s(12115)}},e=>{e.O(0,[143,619,617,441,255,358],()=>e(e.s=63974)),_N_E=e.O()}]);