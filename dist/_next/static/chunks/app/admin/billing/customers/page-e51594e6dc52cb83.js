(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},24768:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var r=a(95155),s=a(12115),n=a(6191),l=a(86651),d=a(11010),i=a(71360),c=a(28297),o=a(70667),m=a(8829),x=a(44754),g=a(25828),u=a(3941),p=a(54074),h=a(27434);function y(){var e,t;let{showNotification:a,showConfirm:y}=(0,h.h)(),[_,b]=(0,s.useState)([]),[j,N]=(0,s.useState)([]),[v,k]=(0,s.useState)(!0),[f,w]=(0,s.useState)(""),[C,A]=(0,s.useState)(!1),[E,D]=(0,s.useState)(!1),[S,I]=(0,s.useState)(null),[P,T]=(0,s.useState)(null),[F,M]=(0,s.useState)({customer_name:"",customer_email:"",retell_agent_ids:[],voice_agent_id:"",sms_agent_id:"",retell_api_key:"",twilio_phone_numbers:[],vonage_phone_numbers:[],billing_contact_name:"",phone_number:"",billing_address:"",tax_id:"",markup_percentage:0,auto_invoice_enabled:!1,notes:""}),[q,R]=(0,s.useState)(""),[L,U]=(0,s.useState)("");(0,s.useEffect)(()=>{O()},[]);let $=(0,s.useCallback)(()=>{if(!f)return void N(_);let e=f.toLowerCase();N(_.filter(t=>t.customer_name.toLowerCase().includes(e)||t.customer_email.toLowerCase().includes(e)))},[f,_]);async function O(){k(!0);try{let{data:e,error:t}=await u.N.from("billing_customers").select("*").order("customer_name",{ascending:!0});if(t)throw t;b(e||[])}catch(e){console.error("Failed to load customers:",e),b([])}finally{k(!1)}}function Y(e){T(e),M({customer_name:e.customer_name,customer_email:e.customer_email,retell_agent_ids:e.retell_agent_ids||[],voice_agent_id:e.voice_agent_id||"",sms_agent_id:e.sms_agent_id||"",retell_api_key:"",twilio_phone_numbers:e.twilio_phone_numbers||[],vonage_phone_numbers:e.vonage_phone_numbers||[],billing_contact_name:e.billing_contact_name||"",phone_number:e.phone_number||"",billing_address:e.billing_address||"",tax_id:e.tax_id||"",markup_percentage:e.markup_percentage,auto_invoice_enabled:e.auto_invoice_enabled,notes:e.notes||""}),R(""),U(""),A(!0)}function B(){q.trim()&&(F.twilio_phone_numbers.includes(q.trim())||M({...F,twilio_phone_numbers:[...F.twilio_phone_numbers,q.trim()]}),R(""))}function V(){L.trim()&&(F.vonage_phone_numbers.includes(L.trim())||M({...F,vonage_phone_numbers:[...F.vonage_phone_numbers,L.trim()]}),U(""))}async function K(e){e.preventDefault();try{let e={customer_name:F.customer_name,customer_email:F.customer_email,retell_agent_ids:F.retell_agent_ids,voice_agent_id:F.voice_agent_id,sms_agent_id:F.sms_agent_id,twilio_phone_numbers:F.twilio_phone_numbers,vonage_phone_numbers:F.vonage_phone_numbers,billing_contact_name:F.billing_contact_name,phone_number:F.phone_number,billing_address:F.billing_address,tax_id:F.tax_id,markup_percentage:F.markup_percentage,auto_invoice_enabled:F.auto_invoice_enabled,notes:F.notes};if(F.retell_api_key.trim()&&(e.retell_api_key_encrypted=F.retell_api_key),P){let{error:t}=await u.N.from("billing_customers").update(e).eq("id",P.id);if(t)throw t;a("Customer updated successfully","success")}else{let{error:t}=await u.N.from("billing_customers").insert([e]);if(t)throw t;a("Customer created successfully","success")}A(!1),O()}catch(e){console.error("Failed to save customer:",e),a("Failed to save customer","error")}}async function z(e){y("Are you sure you want to delete ".concat(e.customer_name,"?"),async()=>{try{let{error:t}=await u.N.from("billing_customers").delete().eq("id",e.id);if(t)throw t;a("Customer deleted successfully","success"),O()}catch(e){console.error("Failed to delete customer:",e),a("Failed to delete customer. They may have associated invoices.","error")}})}return(0,s.useEffect)(()=>{$()},[$]),v?(0,r.jsx)("div",{className:"p-4 md:p-6 lg:p-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 md:h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/2 md:w-1/4 mb-6 md:mb-8"}),(0,r.jsx)("div",{className:"h-64 md:h-96 bg-gray-200 dark:bg-gray-700 rounded"})]})}):(0,r.jsxs)("div",{className:"p-4 md:p-6 lg:p-8",children:[(0,r.jsxs)("div",{className:"mb-6 md:mb-8 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-black gradient-text",children:"Customer Management"}),(0,r.jsx)("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mt-1 md:mt-2",children:"Manage billing customers and their settings"})]}),(0,r.jsxs)(o.$,{onClick:function(){T(null),M({customer_name:"",customer_email:"",retell_agent_ids:[],voice_agent_id:"",sms_agent_id:"",retell_api_key:"",twilio_phone_numbers:[],vonage_phone_numbers:[],billing_contact_name:"",phone_number:"",billing_address:"",tax_id:"",markup_percentage:0,auto_invoice_enabled:!1,notes:""}),R(""),U(""),A(!0)},size:"sm",className:"md:text-base md:px-6 md:py-3",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Add Customer"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Add"})]})]}),(0,r.jsxs)(c.Zp,{children:[(0,r.jsx)(c.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[(0,r.jsxs)(c.ZB,{className:"text-base md:text-lg",children:["Customers (",j.length,")"]}),(0,r.jsx)("div",{className:"w-full sm:w-auto flex items-center gap-4",children:(0,r.jsxs)("div",{className:"relative flex-1 sm:flex-none sm:w-64",children:[(0,r.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),(0,r.jsx)("input",{type:"text",placeholder:"Search customers...",className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:f,onChange:e=>w(e.target.value)})]})})]})}),(0,r.jsx)(c.Wu,{children:(0,r.jsx)("div",{className:"overflow-x-auto -mx-4 md:mx-0",children:(0,r.jsxs)("table",{className:"w-full min-w-[900px]",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Customer Name"}),(0,r.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,r.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Stripe Status"}),(0,r.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Markup"}),(0,r.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto-Invoice"}),(0,r.jsx)("th",{className:"text-left py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Created"}),(0,r.jsx)("th",{className:"text-right py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-700 dark:text-gray-300",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===j.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"text-center py-6 md:py-8 text-gray-500 dark:text-gray-400 text-sm",children:f?"No customers found matching your search":"No customers yet. Add your first customer to get started."})}):j.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{I(e),D(!0)},children:[(0,r.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm font-medium text-gray-900 dark:text-gray-100",children:e.customer_name}),(0,r.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm text-gray-900 dark:text-gray-100",children:e.customer_email}),(0,r.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm",children:e.stripe_customer_id?(0,r.jsx)(g.E,{color:"green",children:"Connected"}):(0,r.jsx)(g.E,{color:"gray",children:"Not Connected"})}),(0,r.jsxs)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm text-gray-900 dark:text-gray-100",children:[e.markup_percentage||0,"%"]}),(0,r.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm",children:e.auto_invoice_enabled?(0,r.jsx)(g.E,{color:"blue",children:"Enabled"}):(0,r.jsx)(g.E,{color:"gray",children:"Disabled"})}),(0,r.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm text-gray-900 dark:text-gray-100",children:(0,p.Yq)(e.created_at)}),(0,r.jsx)("td",{className:"py-2 md:py-3 px-3 md:px-4 text-xs md:text-sm",onClick:e=>e.stopPropagation(),children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),Y(e)},className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-500",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e)},className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(i.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})})]}),S&&(0,r.jsx)(x.a,{isOpen:E,onClose:()=>D(!1),title:"Customer Details",size:"xl",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Customer Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customer Name"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:S.customer_name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:S.customer_email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Contact Name"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:S.billing_contact_name||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Phone Number"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:S.phone_number||"N/A"})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Billing Address"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:S.billing_address||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tax ID"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:S.tax_id||"N/A"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Billing Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Markup Percentage"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[S.markup_percentage||0,"%"]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Auto-Invoice"}),(0,r.jsx)("div",{className:"mt-1",children:S.auto_invoice_enabled?(0,r.jsx)(g.E,{color:"blue",children:"Enabled"}):(0,r.jsx)(g.E,{color:"gray",children:"Disabled"})})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Stripe Status"}),(0,r.jsx)("div",{className:"mt-1",children:S.stripe_customer_id?(0,r.jsx)(g.E,{color:"green",children:"Connected"}):(0,r.jsx)(g.E,{color:"gray",children:"Not Connected"})})]})]}),S.stripe_customer_id&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Stripe Customer ID"}),(0,r.jsx)("p",{className:"font-mono text-xs text-gray-900 dark:text-gray-100",children:S.stripe_customer_id})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Retell AI Configuration"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Voice Agent ID"}),S.voice_agent_id?(0,r.jsx)(g.E,{color:"blue",children:S.voice_agent_id}):(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Not configured"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"SMS Agent ID"}),S.sms_agent_id?(0,r.jsx)(g.E,{color:"green",children:S.sms_agent_id}):(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Not configured"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"API Key"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:S.retell_api_key_encrypted?"••••••••••••":"Not configured"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Twilio Phone Numbers"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Phone Numbers to Track (",(null==(e=S.twilio_phone_numbers)?void 0:e.length)||0,")"]}),S.twilio_phone_numbers&&S.twilio_phone_numbers.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:S.twilio_phone_numbers.map(e=>(0,r.jsx)(g.E,{color:"green",children:e},e))}):(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No phone numbers configured"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Vonage Phone Numbers"}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Phone Numbers to Track (",(null==(t=S.vonage_phone_numbers)?void 0:t.length)||0,")"]}),S.vonage_phone_numbers&&S.vonage_phone_numbers.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:S.vonage_phone_numbers.map(e=>(0,r.jsx)(g.E,{color:"blue",children:e},e))}):(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No phone numbers configured"})]})})]}),S.notes&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Notes"}),(0,r.jsx)("p",{className:"text-sm text-gray-900 dark:text-gray-100 bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:S.notes})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Account Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Created"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:(0,p.Yq)(S.created_at)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last Updated"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:(0,p.Yq)(S.updated_at)})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsx)(o.$,{variant:"secondary",onClick:()=>D(!1),children:"Close"}),(0,r.jsxs)(o.$,{onClick:()=>{D(!1),Y(S)},children:[(0,r.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Edit Customer"]})]})]})}),(0,r.jsx)(x.a,{isOpen:C,onClose:()=>A(!1),title:P?"Edit Customer":"Add New Customer",size:"lg",children:(0,r.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(m.pd,{label:"Customer Name*",value:F.customer_name,onChange:e=>M({...F,customer_name:e.target.value}),required:!0}),(0,r.jsx)(m.pd,{label:"Email*",type:"email",value:F.customer_email,onChange:e=>M({...F,customer_email:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Retell AI Configuration"}),(0,r.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)(m.pd,{label:"Retell AI API Key*",type:"password",value:F.retell_api_key,onChange:e=>M({...F,retell_api_key:e.target.value}),placeholder:"key_...",required:!0,helperText:"This customer's Retell AI API key (encrypted before storage). Required to fetch their call/chat data."}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(m.pd,{label:"Voice Agent ID*",value:F.voice_agent_id,onChange:e=>M({...F,voice_agent_id:e.target.value}),placeholder:"agent_voice_...",required:!0,helperText:"Agent ID for voice calls"}),(0,r.jsx)(m.pd,{label:"SMS Agent ID*",value:F.sms_agent_id,onChange:e=>M({...F,sms_agent_id:e.target.value}),placeholder:"agent_sms_...",required:!0,helperText:"Agent ID for SMS/text messages"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Twilio Phone Numbers"}),(0,r.jsx)("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Numbers to Track*"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number (e.g., +15551234567)",value:q,onChange:e=>R(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),B())}}),(0,r.jsx)(o.$,{type:"button",onClick:B,children:"Add"})]}),F.twilio_phone_numbers.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:F.twilio_phone_numbers.map(e=>(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full text-sm",children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>{M({...F,twilio_phone_numbers:F.twilio_phone_numbers.filter(t=>t!==e)})},className:"hover:text-green-900 dark:hover:text-green-100",children:"\xd7"})]},e))}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add phone numbers to filter Twilio usage for this customer. Use E.164 format (e.g., +15551234567)."})]})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-black gradient-text mb-3",children:"Vonage Phone Numbers"}),(0,r.jsx)("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Phone Numbers to Track*"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number (e.g., +15551234567)",value:L,onChange:e=>U(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),V())}}),(0,r.jsx)(o.$,{type:"button",onClick:V,children:"Add"})]}),F.vonage_phone_numbers.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:F.vonage_phone_numbers.map(e=>(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full text-sm",children:[(0,r.jsx)("span",{children:e}),(0,r.jsx)("button",{type:"button",onClick:()=>{M({...F,vonage_phone_numbers:F.vonage_phone_numbers.filter(t=>t!==e)})},className:"hover:text-purple-900 dark:hover:text-purple-100",children:"\xd7"})]},e))}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add phone numbers to filter Vonage usage for this customer. Use E.164 format (e.g., +15551234567)."})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-200 dark:border-gray-700 pt-6",children:[(0,r.jsx)(m.pd,{label:"Contact Name",value:F.billing_contact_name,onChange:e=>M({...F,billing_contact_name:e.target.value})}),(0,r.jsx)(m.pd,{label:"Phone",value:F.phone_number,onChange:e=>M({...F,phone_number:e.target.value})})]}),(0,r.jsx)(m.pd,{label:"Billing Address",value:F.billing_address,onChange:e=>M({...F,billing_address:e.target.value})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(m.pd,{label:"Tax ID",value:F.tax_id,onChange:e=>M({...F,tax_id:e.target.value})}),(0,r.jsx)(m.pd,{label:"Markup Percentage",type:"number",min:"0",max:"10000",step:"0.1",value:F.markup_percentage,onChange:e=>M({...F,markup_percentage:parseFloat(e.target.value)}),helperText:"e.g., 20 for 20% markup"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"auto_invoice",className:"w-4 h-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",checked:F.auto_invoice_enabled,onChange:e=>M({...F,auto_invoice_enabled:e.target.checked})}),(0,r.jsx)("label",{htmlFor:"auto_invoice",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Enable automatic invoice generation"})]}),(0,r.jsx)(m.pd,{label:"Notes",value:F.notes,onChange:e=>M({...F,notes:e.target.value}),helperText:"Internal notes about this customer"}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,r.jsx)(o.$,{type:"button",variant:"secondary",onClick:()=>A(!1),children:"Cancel"}),(0,r.jsx)(o.$,{type:"submit",children:P?"Update Customer":"Create Customer"})]})]})})]})}},35995:(e,t,a)=>{Promise.resolve().then(a.bind(a,24768))},54074:(e,t,a)=>{"use strict";function r(e){return null==e||isNaN(e)?"$0.00":new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function s(e){if(!e)return"N/A";let t="string"==typeof e?new Date(e):e;return isNaN(t.getTime())?"Invalid Date":new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"short",day:"numeric"}).format(t)}function n(e){return"".concat(s(e.start)," - ").concat(s(e.end))}function l(){let e=new Date;return{start:new Date(e.getFullYear(),e.getMonth()-1,1),end:new Date(e.getFullYear(),e.getMonth(),0)}}function d(){let e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),1),end:new Date}}function i(e){if(0===e.length)return"";let t=Object.keys(e[0]),a=[];for(let r of(a.push(t.join(",")),e)){let e=t.map(e=>{let t=String(r[e]).replace(/"/g,'""');return t.includes(",")?'"'.concat(t,'"'):t});a.push(e.join(","))}return a.join("\n")}function c(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text/plain",r=new Blob([e],{type:a}),s=URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}a.d(t,{IW:()=>r,JT:()=>i,Ln:()=>l,PE:()=>c,Yq:()=>s,tX:()=>n,vM:()=>d})},86651:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}},e=>{e.O(0,[143,906,441,255,358],()=>e(e.s=35995)),_N_E=e.O()}]);